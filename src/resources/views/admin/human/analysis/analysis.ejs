<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ANALYSIS</title>
  <!----===== Boxicons CSS ===== -->
  <link href='https://unpkg.com/boxicons@2.1.1/css/boxicons.min.css' rel='stylesheet'>
  <!----===== Fontawesome Icon CSS ===== -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.3.0/css/all.min.css">
  <!--<title>Dashboard Sidebar Menu</title>-->
  <link rel="stylesheet" href="/css/manage_human.css">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
</head>

<body>
  <%- include("../../../admin/partials/header") %>

  <div class="container">
    <nav aria-label="breadcrumb">
      <ol class="breadcrumb mt-2">
        <li class="breadcrumb-item"><a href="/management/human">Trang quản lí</a></li>
        <li class="breadcrumb-item active" aria-current="page">Thống kê phân tích</li>
      </ol>
    </nav>
  </div>
  <div class="container" id="section-1">
    <div class="text-center">
      <h3><i class="fas fa-calendar-alt"></i> Số liệu</h3>
    </div>
    <table class="table table-dark">
      <thead class="text-center">
        <tr>
          <th scope="col">Tổng số quản trị viên</th>
          <th scope="col">Quản trị viên người dùng</th>
          <th scope="col">Quản trị viên nội dung</th>
        </tr>
      </thead>
      <tbody class="text-center">
        <td><%= adminList.length %></td>
        <td id="ha"><%= adminList.filter(admin=>admin.role==="HA").length %></td>
        <td id="ca"><%= adminList.filter(admin=>admin.role==="CA").length %></td>
      </tbody>
    </table>
    <table class="table table-dark">
      <thead class="text-center">
        <tr>
          <th scope="col">Tổng số người dùng</th>
          <th scope="col">Đăng nhập bằng Facebook</th>
          <th scope="col">Đăng nhập bằng Google</th>
          <th scope="col">Tài khoản đăng ký</th>
        </tr>
      </thead>
      <tbody class="text-center">
        <td><%= lcUser.length + fbUser.length+ ggUser.length %></td>
        <td id="fb-user"><%= fbUser.length %></td>
        <td id="gg-user"><%= ggUser.length %></td>
        <td id="lc-user"><%= lcUser.length %></td>
      </tbody>
    </table>
  </div>
  <div class="container" id="section-2">
    <div class="text-center">
      <h3><i class='bx bxs-pie-chart-alt-2'></i>Biểu đồ</h3>
    </div>
    <div class="row">
      <div class="col-6 col-lg-4 p-2">
        <canvas id="barChart-admin"></canvas>
      </div>
      <div class="col-6 col-lg-8 p-2">
        <canvas id="barChart-user"></canvas>
      </div>
    </div>
  </div>
</body>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
  const ha = document.getElementById("ha").innerHTML;
  const ca = document.getElementById("ca").innerHTML;

  const dataAdminBar = {
    labels: [
      'Quản trị viên người dùng',
      'Quản trị viên nội dung',
    ],
    datasets: [{
      label: 'Số lượng ',
      data: [ha, ca],
      backgroundColor: [
        '#007bff',
        '#28a745',
      ],
      hoverOffset: 4
    }]
  };
  const configAdminBar = {
    type: 'bar',
    data: dataAdminBar,
  };
  const adminChart = new Chart(
    document.getElementById('barChart-admin'),
    configAdminBar
  );
</script>
<script>
  const fbUser = document.getElementById("fb-user").innerHTML;
  const ggUser = document.getElementById("gg-user").innerHTML;
  const lcUser = document.getElementById("lc-user").innerHTML;

  const dataUserBar = {
    labels: [
      'Đăng nhập bằng Facebook',
      'Đăng nhập bằng Google',
      'Tài khoản đăng ký'
    ],
    datasets: [{
      label: 'Số lượng ',
      data: [fbUser, ggUser, lcUser],
      backgroundColor: [
        '#FF5733',
        '#2ECC71',
        '#CCCCFF'
      ],
      hoverOffset: 4
    }]
  };
  const configUserBar = {
    type: 'bar',
    data: dataUserBar,
  };
  const userChart = new Chart(
    document.getElementById('barChart-user'),
    configUserBar
  );
</script>
<script>
  const dataAgeDoughnut = {
    labels: [
      'Đối tượng trên 18+',
      'Đối tượng dưới 18+',
    ],
    datasets: [{
      label: 'My First Dataset',
      data: [],
      backgroundColor: [
        '#007bff',
        '#28a745',
      ],
      hoverOffset: 4
    }]
  };
  const configAgeDoughnut = {
    type: 'doughnut',
    data: dataAgeDoughnut,
  };
  const ageDoughnutChart = new Chart(
    document.getElementById('doughnutChart-age'),
    configAgeDoughnut
  );
</script>

</html>